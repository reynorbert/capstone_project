
@{
    Layout = "~/Views/Shared/_LayoutPageAdmin.cshtml";
}

<div class="w3-content" style="">
    <!-- The Grid -->
    <div class="w3-row-padding">

        <div class="row w3-container" style="border-bottom:solid; border-bottom-color:#808080">
            <div class="col-sm-12">
                <p class="" style="height: 8vh; font-size: 5vh; text-align: left; font-family:'Courier New';color:black"> Ads Page</p>
            </div>
        </div>

        <div class="row w3-container" style="margin-top:2%">
            <div class="col-sm-12">
                <div class="col-sm-5" style="">
                    <p class="" style="height: 8vh; font-size: 3vh; text-align: left; font-family:'Courier New'; text-align:center">
                        <input type="hidden" name="imgSource" id="imgSource">
                        <img src="~/images/upload.png" style="width:30vw; height:50vh" name="imageContainer" id="imageContainer" alt="Avatar">

                        <input type="file" class="form-control" name="imageSrc" id="imageSrc" onchange="previewFile()" style="margin:3vh"><br>
                    </p>
                </div>
                <div class="col-sm-7">
                    <div class="col-sm-12" style="margin-bottom:2vh;  border-bottom:solid; border-bottom-color:gray">
                        <div class="col-sm-12" style="margin-bottom:2vh">
                            <p style="color:#000000"><i class="fa fa-address-card fa-fw w3-margin-right w3-large w3-text-teal"></i> Advert Information</p>
                        </div>
                        <div class="col-sm-12" style="margin-bottom:2vh">
                            <input type="text" class="form-control col-xs-2" placeholder="Ad Name" id="name">
                        </div>
                        <div class="col-sm-12" style="margin-bottom:2vh">
                            <div class="col-sm-5" style="margin-bottom:2vh">
                                <p><input type="date" class="form-control" placeholder="Start Date" id="start"></p>
                            </div>
                            <div class="col-sm-1" style="margin-bottom:2vh">
                                <p>-</p>
                            </div>
                            <div class="col-sm-5" style="margin-bottom:2vh">
                                <p><input type="date" class="form-control" placeholder="Start Date" id="end"></p>
                            </div>
                        </div>

                        <div class="col-sm-12" style="margin-bottom:2vh">
                            <input type="text" class="form-control col-xs-2" placeholder="Redirection" id="page">
                        </div>

                        <div class="col-sm-12" style="margin-bottom:2vh">
                            <button type="button" class="form-control col-xs-12" style="font-size:2vh;background-color:cornflowerblue;width:100%; color:aliceblue;" onclick="save_ads()"> Register Ads  </button>
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>
</div>


<script>



    function previewFile() {
        // var preview = document.querySelector('img');

        var preview = document.getElementById("imageContainer");
        var file = document.getElementById("imageSrc").files[0];
        // document.querySelector('input[name=image]').files[0];
        var imageSourceVar = document.getElementById("imgSource");
        var reader = new FileReader();

        reader.addEventListener("load", function () {
            document.getElementById("imageContainer").src = reader.result;
            document.getElementById("imgSource").value = reader.result;
        }, false);

        if (file) {
            reader.readAsDataURL(file);
        }
    }

    function save_ads() {

        var name = document.getElementById("name").value;
        var start = document.getElementById("start").value;
        var end = document.getElementById("end").value;
        var page = document.getElementById("page").value;
        var file = document.getElementById("imageSrc").value;


        //var img = $('#imageContainer').attr('src');
          $.ajax({
              method: "POST",
              url: "@Url.Action("create_ads", "Admin")",
              data: { name: name, start: start, end: end, url: page, img: file},
              success: function (result) {
                 //window.location = "/Accounts/registration_success";

              },
              failed: function (result) {
                 console.log("Failed");
              },
           });    
    }
    
</script>


